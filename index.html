<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
.bigbox{border:5px solid #f33; border-radius:5px; width:500px; margin:0 auto; padding:40px; font-size:20px}
textarea{width:400px; min-height:100px}
.showfont{width:400px; min-height:100px; border:1px solid #ededed}
.cor{width:50px; height:20px}
.mar{margin:20px 10px}
hr{ margin:20px 0; border:5px solid #ededed; border-radius:5px}
.showfont{font-size:12px}
</style>
<title>无标题文档</title>
<script type="text/javascript" src="jquery-1.12.0.js"></script>
<script>
	jQuery(function($){
		var engarr=['abandon','abruptly','abuse','account','accusation ','adorn ','amply ','balcony ','bargain ','bedraggle ','benefit','bewildering ','boatman ','boundary ','calender ','calculate ','camera ','casualty ','celebration ','colleague ','community ','composure ','defence ','demonstrate ','description ','direct ','dislocate ','eccentricity ','encouragingly ','exempt ','fantastic '];
		var zhongarr=['放弃','突然','责骂','考虑 ','罪名 谴责','装饰 ','足够地','阳台 ','讨价还价','拖湿','好处','令人无所适从的','船夫','边界 ','日历 ','计算 ','摄像机','伤亡人员','庆祝会','同事 ','社区','镇静 ','防护 ','证明 ','描述','指引 ','使混乱','怪僻 ','鼓励地','被免除的','难以置信的 '];
		qudata();//默认显示
		changecor();//默认显示
		$('.eng').val(engarr[0]);
		$('.zhong').val(zhongarr[0]);
		$('.next').on('click',function(){
			var a=$('.eng').val();
			$.each(engarr,function(idx,val){
				if(a==val){
					c=idx;
				}
			})
			if(c==engarr.length-1){
				c=-1;	
			}
			c++;
			$('.eng').val(engarr[c]);
			$('.zhong').val(zhongarr[c])
		})
		$('.prev').on('click',function(){
			var a=$('.eng').val();
			$.each(engarr,function(idx,val){
				if(a==val){
					c=idx;
				}
			})
			if(c==0){
				c=engarr.length;	
			}
			c--;
			$('.eng').val(engarr[c]);
			$('.zhong').val(zhongarr[c]);
			
		})
		//改变选项
		$('.date').on('change',function(){
			$('.showfont,.eng,.zhong').empty();
			qudata();
		})
		//改变颜色选择
		$('.cor').on('change',function(){
				changecor();
		})
		//字体变大
		$('.jia').on('click',function(){
			if(parseInt($('.showfont').css('font-size'))>=36){
				$('.showfont').css({fontSize:"36px"});
				return;
			}else{
				$('.showfont').css({fontSize:(parseInt($('.showfont').css('font-size'))+2)+'px'})
			}
			
		})
		//字体变小
		$('.jian').on('click',function(){
			if(parseInt($('.showfont').css('font-size'))<=12){
				$('.showfont').css({fontSize:"12px"});
				return;
			}else{
				$('.showfont').css({fontSize:(parseInt($('.showfont').css('font-size'))-2)+'px'})
			}
			
		})
		$('.del').on('click',function(){
			var c=$('.eng').val();
			var str=window.localStorage.getItem('sword');
			str=JSON.parse(str);
			$.each(str,function(idx,val){
				if(c==val.english){
					str.splice(idx,1);
					aword=[];
					aword=str;
					sword=JSON.stringify(aword);
					window.localStorage.setItem('sword',sword);
					$('.showfont,.eng,.zhong').empty();
					qudata();	
				}
			});	
				
		})
		var regEnglish=/^[A-Za-z]+$/;//验证输入英文;
		var regzhong=/^[\u4e00-\u9fa5]{0,}$/;//验证输入中文;
		var aword=[];//新建数组存储数据;
		$('.baocun').on('click',function(){
			
			var date=new Date();//获取当前时间存储当前存储数据的时间
			var a=$('.eng').val().replace(/ /g,'');
			var b=$('.zhong').val().replace(/ /g,'');
			if(a!=''&&b!=''&&regEnglish.test(a)&&regzhong.test(b)){
				var jsona={};//建立对象存储当前输入的值;
				jsona={'english':$('.eng').val(),'zhongwen':$('.zhong').val(),'times':date.getTime(),'size':$('.showfont').css('font-size'),'color':('.showfont').css('color'),'bgcolor':('.showfont').css('background')};
				if(aword!=''){
					quchong();
				}else{
					var str=window.localStorage.getItem('sword');
					str=JSON.parse(str);
					$.each(str,function(idx,val){
						aword.push(val);
					});
					if(aword==null){
						aword.shift();
						aword.push(jsona);
						sword=JSON.stringify(aword);
						window.localStorage.setItem('sword',sword);
						return;
					}
					quchong();
					
					
				}
				//去重数据
				function quchong(){
						var xinarr=[];
						xinarr.push(jsona);
						var bNothave=true;
						$.each(aword,function(idx,val){
							bNothave=true;
							$.each(xinarr,function(idex,valu){
								if(val.english==valu.english){
									bNothave=false;	
								}
							})
							if(bNothave){
								xinarr.push(val);	
							}
						})
						aword=[];
						aword=xinarr;
						sword=JSON.stringify(aword);
						window.localStorage.setItem('sword',sword);	
					}
			}else{
				alert('请输入正确完整的中英文')
			}
			$('.showfont,.eng,.zhong').empty();
			qudata();
		})
		//颜色改变
		function changecor(){
			$('.cor').eq(0).css({background:$('.cor').eq(0).children(':selected').val()});
			$('.cor').eq(1).css({background:$('.cor').eq(1).children(':selected').val()});
			$('.showfont').css({background:$('.cor').eq(1).css('background'),color:$('.cor').eq(0).children(':selected').val()})
		}
		//取数据显示在文本框内;
		function qudata(){
			var a=$('.date').children(':selected').val();
			var date=new Date();//获取当前时间;
			var one=86400000;//24小时的毫秒数;
			var str=window.localStorage.getItem('sword');
			str=JSON.parse(str);
			$.each(str,function(idx,val){
				if(date.getTime()-val.times<(one*a)){
					$('<p/>').html(val.english+"; "+val.zhongwen).appendTo($('.showfont'));
				}
			})	
		}
	})
</script>
</head>

<body>
    <div class="bigbox">
        <div>
        	<label>回顾</label>
            <select class="date">
                <option value="1" selected="selected">一天内</option>
                <option value="5">五天内</option>
                <option value="7">一周内</option>
            </select>
            <input type="button" value="上一个" class="prev" />
            <input type="button" value="下一个" class="next" />
        </div>
        <hr />
        <div>
            <p>英文表达</p>
            <textarea class="eng"></textarea>
            <p>中文翻译</p>
            <textarea class="zhong"></textarea>
            <p><input type="button" value="保存内容" class="mar baocun" /><input type="button" value="删除内容"  class="mar del"/></p>
            <hr />
            <p>所有单词阅读</p>
            <div class="showfont"></div>
        </div>
        <div>
            <input type="button" value="A+" class="mar jia" /><input type="button" value="A-" class="mar jian" /><label>字体颜色</label>
            <select class="cor">
                  <option value="White" style="background:white;"></option>
                  <option value="Black" style="background:black;" selected="selected"></option>
                  <option value="Red" style="background:red;" ></option>
                  <option value="Yellow" style="background:yellow;"></option>
                  <option value="Pink" style="background:pink;"></option>
                  <option value="Green" style="background:green;"></option>
                  <option value="Orange" style="background:orange;"></option>
                  <option value="Purple" style="background:purple;"></option>
                  <option value="Blue" style="background:blue;"></option>
                  <option value="Beige" style="background:beige;"></option>
                  <option value="Brown" style="background:brown;"></option>
                  <option value="Teal" style="background:teal;"></option>
                  <option value="Navy" style="background:navy;"></option>
                  <option value="Maroon" style="background:maroon;"></option>
                  <option value="LimeGreen" style="background:limegreen;"></option>  
                  </select>
            <label>背景颜色</label>
            <select class="cor">
                  <option value="White" style="background:white;" selected="selected"></option>
                  <option value="Black" style="background:black;"></option>
                  <option value="Red" style="background:red;"></option>
                  <option value="Yellow" style="background:yellow;"></option>
                  <option value="Pink" style="background:pink;"></option>
                  <option value="Green" style="background:green;"></option>
                  <option value="Orange" style="background:orange;"></option>
                  <option value="Purple" style="background:purple;"></option>
                  <option value="Blue" style="background:blue;"></option>
                  <option value="Beige" style="background:beige;"></option>
                  <option value="Brown" style="background:brown;"></option>
                  <option value="Teal" style="background:teal;"></option>
                  <option value="Navy" style="background:navy;"></option>
                  <option value="Maroon" style="background:maroon;"></option>
                  <option value="LimeGreen" style="background:limegreen;"></option>  
           </select>  
        </div>
    </div>
</body>
</html>
